---
title: Installation
description: "Install the CostHawk MCP server for Claude Code and Claude Desktop"
---

## Quick Setup (Recommended)

One command to install CostHawk with auto-sync enabled:

```bash
claude mcp add -s user \
  -e COSTHAWK_API_KEY=YOUR_TOKEN_HERE \
  -e COSTHAWK_AUTO_SYNC=true \
  costhawk -- npx --yes costhawk@latest
```

Replace `YOUR_TOKEN_HERE` with your access token from **Settings â†’ Developer** in your CostHawk dashboard.

<Tip>
  This is a one-time setup. The env vars are stored in your MCP config, so auto-sync runs automatically on every Claude Code session.
</Tip>

**Verify it worked:**

```bash
npx --yes costhawk@latest --self-test
```

You should see `"autoSyncEnabled": true` and `"hasApiKey": true`.

---

## Claude-Only Mode

If you want to sync Claude Code usage but **not** Codex CLI:

```bash
claude mcp add -s user \
  -e COSTHAWK_API_KEY=YOUR_TOKEN_HERE \
  -e COSTHAWK_AUTO_SYNC=true \
  -e COSTHAWK_CODEX_AUTO_SYNC=false \
  costhawk -- npx --yes costhawk@latest
```

### Manual Configuration

Add to `~/.claude/.mcp.json`:

```json
{
  "mcpServers": {
    "costhawk": {
      "command": "npx",
      "args": ["-y", "costhawk"],
      "env": {
        "COSTHAWK_API_KEY": "YOUR_TOKEN_HERE"
      }
    }
  }
}
```

Then restart Claude Code.

## Claude Desktop

### macOS

Edit `~/Library/Application Support/Claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "costhawk": {
      "command": "npx",
      "args": ["-y", "costhawk"],
      "env": {
        "COSTHAWK_API_KEY": "YOUR_TOKEN_HERE"
      }
    }
  }
}
```

### Windows

Edit `%APPDATA%\Claude\claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "costhawk": {
      "command": "npx",
      "args": ["-y", "costhawk"],
      "env": {
        "COSTHAWK_API_KEY": "YOUR_TOKEN_HERE"
      }
    }
  }
}
```

Then restart Claude Desktop.

## Verify Installation

After restarting, ask Claude:

> "What CostHawk tools are available?"

Claude should list the available tools like `costhawk_get_usage_summary`, `costhawk_get_savings`, etc.

## Updating

The MCP server uses `npx --yes costhawk` which automatically fetches the latest version. To force an update, clear the npx cache:

```bash
rm -rf ~/.npm/_npx
```

Then restart Claude Code/Desktop.

## Environment Variables

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `COSTHAWK_API_KEY` | Yes | - | Your CostHawk access token |
| `COSTHAWK_API_URL` | No | `https://costhawk.ai` | API base URL |
| `COSTHAWK_AUTO_SYNC` | No | `false` | Enable automatic sync on tool calls |
| `COSTHAWK_SYNC_CODEX` | No | `true` | Include Codex CLI data in syncs |

## Trust & Privacy Features

CostHawk is designed with transparency in mind. Here's how to verify what the MCP server does:

### Preview Mode (Dry Run)

Before syncing any data, you can preview exactly what would be sent:

```
"Sync my Claude Code usage with dryRun enabled"
```

This returns the full payload without making any network requests.

### See What Files We Access

Run this command to see all files CostHawk would read:

```bash
npx costhawk --what-we-read
```

**Output example:**
```
CostHawk MCP Server v1.3.3 - Files We Access

Claude Code:
  ~/.claude/projects/*/conversations.json
  ~/.claude/projects/*/settings.json

OpenAI Codex:
  ~/.codex/sessions/*.json

Note: We only read usage metadata (tokens, models, timestamps).
We never read your code, prompts, or conversation content.
```

### Disable Codex Sync

If you only want to sync Claude Code data:

```json
{
  "mcpServers": {
    "costhawk": {
      "command": "npx",
      "args": ["-y", "costhawk"],
      "env": {
        "COSTHAWK_API_KEY": "YOUR_TOKEN_HERE",
        "COSTHAWK_SYNC_CODEX": "false"
      }
    }
  }
}
```

### What Data We Send

When you sync, CostHawk sends only:

- **Token counts** - Input/output/cache tokens per session
- **Model identifiers** - Which AI models were used
- **Timestamps** - When sessions occurred
- **Hashed project IDs** - For grouping (never actual project names or paths)
- **Calculated costs** - Based on token counts and current pricing

We **never** send:
- Your code or files
- Prompt content or conversations
- File paths or project names
- Any personally identifiable information
